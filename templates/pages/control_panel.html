{% load static %}
{% block content %}
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="{% static '/css/styles.css' %}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Ruslan+Display&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="header">
      <nav class="nav"></nav>
      <div class="container"></div>
      <div class="author__bg">
        <div class="author__dowland">
          <span class="author__bg-text"
            >Загрузите фоновое <br />
            изображение</span
          >
          <button class="author__btn-all" id="background_photo">Выбрать</button>
        </div>
        <h1 class="author__name">{{ user.first_name }} {{ user.last_name }}</h1>
      </div>
      <div class="author__status container">
        <div class="author__circle">
          <div class="author__dowland author__dowland-incircle">
            <span class="author__bg-text"
              >Загрузите фоновое <br />
              изображение</span
            >
            <button class="author__btn-all author__btn">Выбрать</button>
          </div>
        </div>
        <div class="author__status-title">
          <div class="author__status-texts">
            <p class="author__status-text">Произведения</p>
            <span class="author__status-quantity">274</span>
          </div>
          <div class="author__status-texts">
            <p class="author__status-text">
              получено <br />
              рецензий
            </p>
            <span class="author__status-quantity">81 562</span>
          </div>
          <div class="author__status-texts">
            <p class="author__status-text">читатели</p>
            <span class="author__status-quantity">427 895</span>
          </div>
        </div>
      </div>
    </header>
    <section class="section__creation">
      <div class="container">
        <div class="creation__texts">
          <h1 class="creation__text">мои произведения</h1>
        </div>
        <div class="creation__inputs">
          <input class="creation__input" id="search_input_id" placeholder="Поиск" type="text" />
          <div class="creation__search-icon">
            <img src="{% static '/img/search__icon.png' %}" alt="">
          </div>
        </div>

        <div class="creation__blocks">

          <div class="creation__title">
            <div class="creation__title-top">
              <p class="creation__top-big">Название произведения</p>
              <p class="creation__top-text">Жанр и дата публикации</p>
              <span class="creation__top-span">{{ user.first_name }} {{ user.last_name }}</span>
            </div>
          <div id="search_input_block_id">
              {% for verse in verses %}
              {% if forloop.counter|divisibleby:2 %}
                  <a href="{% url 'verse_detail_view' pk=verse.pk %}">
                      <div class="creation__title-grey" href="{% url 'verse_detail_view' pk=verse.id %}">{{ verse.name }} {{ verse.category }} {{ verse.pubdate }} {{ verse.author }}</div>
                  </a>
              {% else %}
                  <a href="{% url 'verse_detail_view' pk=verse.pk %}">
                      <div class="creation__title-white" href="{% url 'verse_detail_view' pk=verse.id %}">{{ verse.name }} {{ verse.category }} {{ verse.pubdate }} {{ verse.author }}</div>
                  </a>
              {% endif %}
            {% endfor %}
          </div>
          </div>
          <div class="reviews__symbol">
            <div class="reviews__arrows">
                {% if page_obj.has_previous %}
              <div class="reviews__arrows-left">
                  <a href="?page={{ page_obj.previous_page_number }}"><img class="arrow" src="{% static '/img/arrow.png' %}" alt="Солго" /></a>
              </div>
                {% else %}
                <div class="reviews__arrows-left disabled">
                  <a href=""><img class="arrow" src="{% static '/img/arrow.png' %}" alt="Солго" /></a>
              </div>
            {% endif %}

            {% if page_obj.has_next %}
              <div class="reviews__arrows-right">
                  <a href="?page={{ page_obj.next_page_number }}"><img
                  class="arrow arrow__right"
                  src="{% static '/img/arrow.png' %}"
                  alt="Оңго"
                /></a>
              </div>
            {% else %}
            <div class="reviews__arrows-right disabled">
                  <a href=""><img
                  class="arrow arrow__right"
                  src="{% static '/img/arrow.png' %}"
                  alt="Оңго"
                /></a>
            </div>
            {% endif %}



            <div class="reviews__circles">
            {% if page_obj.has_previous %}
              <a href="?page={{ page_obj.previous_page_number }}">
                  <div class="reviews__circle"></div>
              </a>
                {% else %}

                {% endif %}
          <a href="">
              <div class="reviews__circle-big active"></div>{{ page_obj.number }} из {{ page_obj.paginator.num_pages }}</a>
          {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}"><div class="reviews__circle"></div></a>
          {% else %}

          {% endif %}

            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="section__publish">


      <div class="container">
        <div class="publish__texts">
          <h2 class="publish__text">Опубликовать произведение</h2>
        </div>
        <div class="publish__blocks">
          <div class="publish__block-works">
            <span class="block-works-text">Произведение</span>
            <input type="text" id="content_input_id" {{ verse.content }} class="block-works">
          </div>
          <div class="publish__block-illust">
            <span class="block-works-text">ИЛЛЮСТРАЦИЯ</span>
            <div class="block-illust">
              <div class="block-illust-texts">
                <span class="block-illust-text"
                  >Загрузите  изображение</span
                >
                <button class="block-illust-btn">Выбрать</button>
              </div>
            </div>
            <span class="block-bottom-text">Название</span>
              <input class="block-description-input" id="name_input_id" {{ verse.name }} type="text">
          </div>
          <div class="publish__block-description">
            <span class="block-description-text">описание</span>
            <input class="block-description-input" id="description_input_id" {{ verse.decription }} type="text">
            <span class="block-description-text">хештеги</span>
            <input class="block-bottom-input" id="tags_input_id" {{ verse.tags }} type="text">
            <span class="block-description-text">жанр</span>


            <select class="block-description-select" onchange="showOptions(this)" id="block-description-select-id"  name="">
                {% for category in category_list %}
                <option id="{{ category.id }}">{{ category.name }}</option>
                {% endfor %}
            </select>


            <button class="block-description-btn" id="verse_btn_id">опубликовать</button>
              <p id="verse_error_id" style="color: red; font-size: 13px; margin-left: 10px; display: none">Введите не заполненные поля</p>
          </div>
        </div>
      </div>
    </section>

      </body>

    {% endblock %}

<script>
    const verseCreateUrl = '{% url "control_panel" %}';
    const AuthorId = {{ author_id }};
    const verseSearchUrl = '{% url "search_list" %}';
</script>

<script src="{% static 'js/control_panel.js' %}"></script>
<script src="{% static 'js/search_input.js' %}"></script>

 <script>
        function getCookie(name) {
            let cookieValue = null;

            if (document.cookie && document.cookie !== '') {
                let cookies = document.cookie.split(';');
                console.log(cookies);
                for (let i = 0; i < cookies.length; i++) {
                    let cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) == (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }

            return cookieValue;
        };


    </script>